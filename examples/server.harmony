import net from "net"
const server = net.create_server()

server.get("/", fn(req, res) {
  res.html("<h1>Hello World</h1>")
})

server.get("/api/data", fn(req, res) {
  const data = map{
    "message" -> "Hello from API",
    "query" -> req.query,
  }

  res.json(data)
})

server.post("/api/submit", fn(req, res) {
  const data = map{
    "message" -> "Data received",
    "body" -> req.body,
  }

  res.status(201).json(data)
})

net.serve(server, 3000)